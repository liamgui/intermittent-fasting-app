(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function e(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(n){if(n.ep)return;n.ep=!0;const i=e(n);fetch(n.href,i)}})();document.querySelector("[data-chart]");let K=document.querySelector("[data-timer]");const H=document.querySelectorAll("[data-graph]");document.querySelectorAll("[data-time]");let O=document.querySelectorAll("[data-hour]"),C=document.querySelectorAll("[data-date]"),D=document.getElementById("button"),F=document.getElementById("startWord"),N=document.getElementById("averageHours"),T,J,u,x,S=localStorage.getItem("goal");(S==null||S==null)&&(S=18,localStorage.setItem("goal",18));let U=document.getElementById("goalLine"),X=document.getElementById("goalNumber");X.innerHTML=S+" hours";let M,W=document.querySelectorAll("#overlayDiv h1")[0];function P(){let t=Math.floor(Date.now())-u,e=t/1e3,l=t/6e4,n=t/36e5,i=Math.floor(e%60),r=Math.floor(l%60),y=Math.floor(n);J=setTimeout(P,100),y=p(y),r=p(r),i=p(i),K.innerHTML=y+":"+r+":"+i;function p(m){return m<10&&(m="0"+m),m}let d=document.getElementById("progressBar");document.getElementById("progressBarDiv");let c=S*36e5,s=t*100/c;d.style.width=s+"%",s<1&&(d.style.width="1%");let a=document.getElementById("goalTime"),g=new Date(c+u);function f(m){let h=m.getHours(),b="AM";h>=13&&(h=h-12,b="PM"),h===12&&(b="PM");let E=m.getMinutes();function R(k){return k<10&&(k="0"+k),k}return E=R(E),h+":"+E+" "+b}a.innerHTML=f(g);let v=document.getElementById("startTime"),I=new Date(u);v.innerHTML=f(I)}function Y(){clearTimeout(J),clearInterval(J)}function Q(){document.getElementById("startTime").addEventListener("click",function(){let t=new Date(u),e=document.createElement("div");document.querySelectorAll("body")[0].appendChild(e),e.style.background="rgba(255,255,255,0.85)",e.style.height="100%",e.style.width="100%",e.style.zIndex="100",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.margin="0 auto";let l=document.createElement("h2");l.innerHTML="Start Time",e.appendChild(l),l.setAttribute("id","startTimeH2");let n=document.createElement("div"),i=document.createElement("input");e.appendChild(n),n.appendChild(i),n.setAttribute("id","anInputDiv"),i.setAttribute("type","text"),i.setAttribute("id","input-4"),i.readonly=!0;let r=function(){setTimeout(r,100),t=new Date};r(),$("#input-4").AnyPicker({mode:"datetime",selectedDate:new Date(u),inputDateTimeFormat:"DDD M/dd h:mm AA",dateTimeFormat:"MMM dd h:mm AA",onSetOutput:function(y,p){if(p.date.getTime()>t){i.style.color="red";return}u=p.date,u=u.getTime(),localStorage.setItem("startTime",u),document.querySelectorAll("body")[0].removeChild(e)}}),e.addEventListener("click",function(){document.querySelectorAll("body")[0].removeChild(e)})})}function G(){if(T===!1)u=Math.floor(Date.now()),T=!0,localStorage.setItem("startTime",u),localStorage.setItem("counting",!0),document.getElementById("progressBarDiv").style.visibility="visible",P(),Q(),F.innerHTML="Stop";else if(T===!0){let o=new Date().getTime();document.getElementById("progressBarDiv").style.visibility="hidden",F.innerHTML="Start",Y(),T=!1,localStorage.setItem("stopTime",o),localStorage.setItem("counting",!1),x=o-u,Z(u,o);let t=JSON.parse(localStorage.getItem("times"));if(M!=null){let e=new L(H[M.length],t.slice(-1)[0]);e.back.style.display="none"}else if(M==null){let e=new L(H[0],t[0]);e.back.style.display="none"}A(),w()}}function Z(o,t){let e;function l(){if(localStorage.getItem("times")!==null){e=JSON.parse(localStorage.getItem("times"));let n=parseInt(localStorage.getItem("id"));n+=1,e.push({id:n,startTime:o,stopTime:t,blockTime:x}),localStorage.setItem("id",n);return}else{e=new Array,e=[{id:1,startTime:o,stopTime:t,blockTime:x}],localStorage.setItem("id",1);return}}l(),localStorage.setItem("times",JSON.stringify(e))}function A(){let o=JSON.parse(localStorage.getItem("times")),t=o;function e(){for(let d in o)if(t.length>7)t.shift(),e();else return}if(e(),t==null||t==null){O[0].innerHTML="",C[0].innerHTML="",H[0].style.height="0px",N.innerHTML="0",averageMinutes.innerHTML="0";return}M=t;let l=document.getElementsByClassName("graphs")[0].offsetHeight,n=80/100*l/S,i=S*n;U.style.bottom=i+"px";let r;r==null&&(r=0);function y(d,c,s,a){if(d==null||d==null){a.style.height="0",s.innerHTML="",c.innerHTML="",N.innerHTML="0",averageMinutes.innerHTML="0";return}let g=Math.round(d.blockTime/36e5*10)/10,f=g*n;a.style.height=f+"px",a.style.transition="height 1s ease-in";function v(){g<1?c.innerHTML="0hr":c.innerHTML=Math.round(d.blockTime/36e5*10)/10+"hr"}function I(){let m=new Date(d.stopTime);m=m.toString();let h=m.slice(4,7);h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].indexOf(h)+1;let E=m.slice(8,10);m=h+"/"+E,h>=10&&(s.style.fontSize="13px"),s.innerHTML=m}v(),I()}function p(){r=0;for(let a in t)r+=parseInt(t[a].blockTime);const d=r/t.length;let c=Math.round(d/6e4),s=Math.floor(c/60);c=c-s*60,N.innerHTML=s,averageMinutes.innerHTML=c}for(let[d,c]of t.entries())y(c,O[d],C[d],H[d]);p()}function _(){if(T=localStorage.getItem("counting"),T==="true"?T=!0:T=!1,T===!0){F.innerHTML="Stop",document.getElementById("progressBarDiv").style.visibility="visible",u=JSON.parse(localStorage.getItem("startTime")),P(),Q();return}else if(T===!1){document.getElementById("progressBarDiv").style.visibility="hidden";return}}let q=document.getElementsByClassName("graphChart")[0],j=document.getElementsByClassName("graphDiv"),B;function w(){B=function(t){let e=t.target;for(let l in j)if(e===j[l]&&e.style.height!=="0px"){L(e.id,M[l]);return}else if((e===O[l]||e===C[l])&&e.innerHTML!==""){L(e.id,M[l]);return}else if(e===document.getElementsByClassName("times")[l]&&e.childNodes[1].innerHTML!==""){L(e.id,M[l]);return}},q.addEventListener("click",B,!1)}function L(o,t){q.removeEventListener("click",B,!1);let e=document.getElementById("overlayDiv");e.style.display="block";let l=document.getElementById("back");this.back=l,l.addEventListener("click",function(){e.style.display="none",q.addEventListener("click",B,!1)},!1),l.style.display="block";let n=t.startTime,i=t.stopTime;t.blockTime;let r;$("#input-1").AnyPicker({mode:"datetime",selectedDate:new Date(t.startTime),inputDateTimeFormat:"DDD M/dd h:mm AA",dateTimeFormat:"MMM dd h:mm AA",onSetOutput:function(s,a){n=a.date,n=n.getTime(),y(n,i)}}),$("#input-2").AnyPicker({mode:"datetime",selectedDate:new Date(t.stopTime),inputDateTimeFormat:"DDD M/dd h:mm AA",dateTimeFormat:"MMM dd h:mm AA",onSetOutput:function(s,a){i=a.date,i=i.getTime(),y(n,i)}}),y(n,i);function y(s,a){let g=document.getElementById("fastingTime");function f(v,I){f=I-v,f<0?r=0:r=Math.round(f/36e5*10)/10}f(s,a),g.innerHTML=r,r!=1?g.innerHTML=r+" hours":g.innerHTML=r+" hour"}let p=document.getElementById("overlayGoal");p.innerHTML=JSON.parse(localStorage.getItem("goal"))+" hours",document.getElementById("delete").addEventListener("click",function(){V(o,t)},!1),W.innerHTML="Edit",document.getElementById("save").addEventListener("click",function(){let s=JSON.parse(localStorage.getItem("times")),a;for(let v in s)s[v].id==t.id&&(a=s[v]);a.startTime=n,a.stopTime=i,a.blockTime=i-n,a.blockTime<0&&(a.blockTime=0),localStorage.setItem("times",JSON.stringify(s)),e.style.display="none";let g=document.getElementById("overlayContainer");const f=e.cloneNode(!0);g.removeChild(e),g.appendChild(f),e=f,e.style.display="none",W.innerHTML="Edit",K.innerHTML="--:--:--",A(),w()},!1)}function V(o,t){let e=JSON.parse(localStorage.getItem("times"));for(let l in e)e[l].id==t.id&&e.splice(l,1);localStorage.setItem("times",JSON.stringify(e)),overlayDiv.style.display="none",(JSON.parse(localStorage.getItem("times"))==null||JSON.parse(localStorage.getItem("times")).length==0)&&localStorage.removeItem("times"),A(),w()}function ee(){if(!navigator.standalone){let o=document.getElementById("unfocused");o.style.display="block";let t=document.getElementById("promptBox");o.addEventListener("click",function(e){e.target===o&&(o.style.display="none")},!1),t.appendChild(logo),t.appendChild(instructionsPic),t.appendChild(instructions)}}function z(){"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js").then(function(o){console.log("ServiceWorker registration successful with scope: ",o.scope)},function(o){console.log("ServiceWorker registration failed: ",o)}),ee(),_(),A(),w(),D.addEventListener?D.addEventListener("click",G,!1):D.attachEvent&&D.attachEvent("onclick",G)}window.addEventListener?window.addEventListener("load",z,!1):window.attachEvent&&window.attachEvent("onload",z);
